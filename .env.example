# ═══════════════════════════════════════════════════════════════════════════════
# TK TRADING DECISION SUPPORT SYSTEM - Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════
#
# ⚠️  IMPORTANT SAFETY NOTICE ⚠️
# This system is designed as a DECISION SUPPORT tool, NOT an autonomous trading bot.
# Execution features are DISABLED by default for safety.
#
# Copy this file to .env and configure your settings.
# NEVER commit .env files to version control.
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────────
# APPLICATION SETTINGS
# ─────────────────────────────────────────────────────────────────────────────────

# Environment: development | production | test
NODE_ENV=development

# Logging level: debug | info | warn | error
LOG_LEVEL=info

# ─────────────────────────────────────────────────────────────────────────────────
# TELEGRAM BOT CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────────
# Create a bot via @BotFather on Telegram to get your token

# Bot token from @BotFather (required)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Chat ID where notifications will be sent (required)
# Use @userinfobot or @getidsbot to find your chat ID
TELEGRAM_CHAT_ID=your_chat_id_here

# Comma-separated list of authorized user IDs (required)
# Only these users can interact with the bot
TELEGRAM_ADMIN_IDS=123456789,987654321

# ─────────────────────────────────────────────────────────────────────────────────
# BINANCE API CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────────
# Create API keys at https://www.binance.com/en/my/settings/api-management
#
# ⚠️  SECURITY RECOMMENDATIONS:
# - Enable IP whitelist restriction
# - Only enable "Futures" permissions
# - DISABLE "Enable Withdrawals"
# - Consider using read-only keys for testing

# Binance API Key (required)
BINANCE_API_KEY=your_binance_api_key_here

# Binance API Secret (required)
BINANCE_API_SECRET=your_binance_api_secret_here

# Use Binance Testnet for development/testing (recommended: true for dev)
# Testnet: https://testnet.binancefuture.com
BINANCE_TESTNET=true

# ─────────────────────────────────────────────────────────────────────────────────
# EXECUTION CONTROL (CRITICAL SAFETY SETTINGS)
# ─────────────────────────────────────────────────────────────────────────────────
#
# ⚠️  THESE SETTINGS CONTROL WHETHER THE SYSTEM CAN EXECUTE TRADES
# ⚠️  LEAVE AS FALSE UNTIL YOU FULLY UNDERSTAND THE SYSTEM
#

# Master switch for trade execution
# false = System operates in SUGGESTION-ONLY mode (safe)
# true  = System can execute trades after human confirmation
# DEFAULT: false (ALWAYS start with false)
EXECUTION_ENABLED=false

# Master switch for Auto-Protect feature (Mode C)
# false = Auto-Protect is globally disabled
# true  = Auto-Protect can be enabled per-position
# DEFAULT: false
AUTO_PROTECT_GLOBALLY_ENABLED=false

# ─────────────────────────────────────────────────────────────────────────────────
# REDIS CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────────
# Redis is used for state persistence and rate limiting

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis password (if required)
# REDIS_PASSWORD=your_redis_password

# ─────────────────────────────────────────────────────────────────────────────────
# SAFETY LIMITS
# ─────────────────────────────────────────────────────────────────────────────────
# These limits provide additional protection against errors

# Maximum position size in USD (per order)
MAX_POSITION_SIZE_USD=10000

# Maximum number of orders per 24-hour period
MAX_DAILY_ORDERS=10

# Order confirmation timeout in milliseconds (default: 5 minutes)
# Prepared orders expire after this time if not confirmed
ORDER_CONFIRMATION_TIMEOUT_MS=300000

# ─────────────────────────────────────────────────────────────────────────────────
# EXTERNAL DATA SOURCES (OPTIONAL)
# ─────────────────────────────────────────────────────────────────────────────────
# These are placeholder URLs for external data feeds
# Actual implementation depends on your data providers

# Option data API endpoint (for Regime Gate)
# OPTION_DATA_API_URL=https://your-option-data-provider/api

# Whale data API endpoint (for Flow Gate)
# WHALE_DATA_API_URL=https://your-whale-data-provider/api

# ─────────────────────────────────────────────────────────────────────────────────
# ASSETS TO TRACK
# ─────────────────────────────────────────────────────────────────────────────────
# Comma-separated list of trading pairs to monitor

TRACKED_ASSETS=BTCUSDT,ETHUSDT

# ─────────────────────────────────────────────────────────────────────────────────
# TIMING CONFIGURATION (OPTIONAL)
# ─────────────────────────────────────────────────────────────────────────────────
# Override default timing values (in milliseconds)

# How often to evaluate gates (default: 60000 = 1 minute)
# GATE_EVALUATION_INTERVAL_MS=60000

# How long permission assessments are valid (default: 300000 = 5 minutes)
# PERMISSION_VALIDITY_MS=300000

# Threshold for marking data as stale (default: 120000 = 2 minutes)
# DATA_STALENESS_THRESHOLD_MS=120000

# ─────────────────────────────────────────────────────────────────────────────────
# AUTO-ENTRY CONFIGURATION (ADVANCED)
# ─────────────────────────────────────────────────────────────────────────────────
# ⚠️  THESE SETTINGS CONTROL AUTOMATIC ORDER ENTRY
# ⚠️  ONLY ENABLE AFTER FULLY UNDERSTANDING THE SYSTEM
#
# AUTO-ENTRY is a separate feature from manual EXECUTION_ENABLED above.
# It allows the system to automatically enter positions when high-quality signals are detected.

# Enable automatic entry when good signals are detected
# false = System only sends notifications (default)
# true  = System can automatically enter positions
# DEFAULT: false
AUTO_ENTRY_ENABLED=false

# Auto-entry mode (only applies if AUTO_ENTRY_ENABLED=true)
# SAFE   = Requires manual /confirm via Telegram before executing (recommended)
# AUTO   = Executes immediately without confirmation (risky)
# HYBRID = Auto-executes high-confidence signals (≥80%), asks confirmation for others
# DEFAULT: SAFE
AUTO_ENTRY_MODE=SAFE

# TP/SL (Take Profit / Stop Loss) mode
# AUTO_TPSL  = Automatically set both TP and SL orders (recommended)
# SL_ONLY    = Only set Stop Loss, no Take Profit
# MANUAL     = No automatic TP/SL, you manage manually
# DEFAULT: AUTO_TPSL
TPSL_MODE=AUTO_TPSL

# Risk per trade (percentage of account balance)
# 0.01 = 1% risk per trade (conservative)
# 0.02 = 2% risk per trade (moderate)
# 0.03 = 3% risk per trade (aggressive)
# DEFAULT: 0.01 (1%)
RISK_PER_TRADE_PERCENT=0.01

# Risk/Reward ratio (how much profit to target vs risk)
# 2.0 = Target 2x your risk (1:2 ratio)
# 3.0 = Target 3x your risk (1:3 ratio)
# DEFAULT: 2.0
RISK_REWARD_RATIO=2.0

# Default stop loss percentage (fallback if no Stress Range available)
# 0.02 = 2% stop loss from entry
# DEFAULT: 0.02 (2%)
DEFAULT_STOP_LOSS_PERCENT=0.02

# Maximum leverage to use
# 1 = No leverage (spot-like trading)
# 2 = 2x leverage
# 5 = 5x leverage (higher risk)
# DEFAULT: 1
MAX_LEVERAGE=1

# Minimum confidence score to trigger auto-entry (0-100)
# Only signals with confidence >= this threshold will be acted upon
# 60 = Moderate quality threshold
# 80 = High quality threshold
# DEFAULT: 60
MIN_CONFIDENCE_SCORE=60

# Maximum concurrent positions
# Limits how many positions can be open at the same time
# DEFAULT: 3
MAX_CONCURRENT_POSITIONS=3

# ═══════════════════════════════════════════════════════════════════════════════
# END OF CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════
